import requests
import os
import json

json_file_path = os.path.join("config", "settings.json")

absolute_path = os.path.abspath(json_file_path)

try:
    with open(absolute_path, 'r', encoding='utf-8') as json_file:
        config = json.load(json_file)
        base_url = config.get("base_url")
except FileNotFoundError:
    print(f"[ERROR] JSON File Not Found. PATH : {absolute_path}")
except json.JSONDecodeError:
    print(f"[ERROR] JSON File is invalid. PATH : {absolute_path}")

try :
    response = requests.get(base_url)
except requests.RequestException as e :
    print(f"HTTP Request Failed: {e}")    


def get_server_info(response) :
    print("========================================")
    print("========== Server Information ==========")
    print("========================================")
    server_info = response.headers.get("Server", "Server info Not Found")
    powered_by = response.headers.get("X-Powered-By", "\'Powered by\' Not Found")
    
    print("Server Information:")
    print(f"Server: {server_info}")
    print(f"X-Powered-By : {powered_by}")

#def get_security_headers(base_url) :
    

get_server_info(response)

